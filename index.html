<!DOCTYPE html>
<html>
  <head>
    <title>Free HD Media Search</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
        background: linear-gradient(45deg, #ff9a9e, #fad0c4, #fbc2eb, #a1c4fd, #c2e9fb);
        background-size: 200% 200%;
        animation: hueShift 30s infinite;
      }

      @keyframes hueShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      h1 {
        margin-top: 20px;
        font-size: 2.5em;
        color: #222;
      }

      #searchContainer {
        margin: 20px 0;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      input[type="text"], input[type="number"], select {
        width: 300px;
        padding: 10px;
        font-size: 1em;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-bottom: 10px;
      }

      button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 1em;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #0056b3;
      }

      #iframeContainer {
        margin-top: 20px;
        width: 80%;
        max-width: 1200px;
        text-align: center;
      }

      iframe {
        width: 100%;
        height: 600px;
        border: none;
        border-radius: 20px;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <h1>Watch Media in Full HD</h1>
    <div id="searchContainer">
      <select id="mediaType">
        <option value="movie">Movie</option>
        <option value="tv">TV Show</option>
        <option value="episode">Episode</option>
      </select>
      <input type="text" id="mediaName" placeholder="Enter media name" />
      <input type="number" id="seasonNumber" placeholder="Season number (for episodes)" style="display: none;" />
      <input type="number" id="episodeNumber" placeholder="Episode number (for episodes)" style="display: none;" />
      <button onclick="embedMedia()">Search</button>
    </div>
    <div id="iframeContainer"></div>

    <script>
      // Show/hide fields based on media type
      document.getElementById("mediaType").addEventListener("change", function () {
        const mediaType = this.value;
        const seasonInput = document.getElementById("seasonNumber");
        const episodeInput = document.getElementById("episodeNumber");

        if (mediaType === "episode") {
          seasonInput.style.display = "block";
          episodeInput.style.display = "block";
        } else {
          seasonInput.style.display = "none";
          episodeInput.style.display = "none";
        }
      });

      async function embedMedia() {
        const mediaType = document.getElementById("mediaType").value;
        const mediaName = document.getElementById("mediaName").value.trim();
        const seasonNumber = document.getElementById("seasonNumber").value.trim();
        const episodeNumber = document.getElementById("episodeNumber").value.trim();

        if (!mediaName) {
          alert("Please enter a media name!");
          return;
        }

        const proxy = "https://cors-anywhere.herokuapp.com/";
        const searchUrl = `${proxy}https://www.imdb.com/find?q=${encodeURIComponent(mediaName)}&s=tt`;

        try {
          // Fetch IMDb search results
          const response = await fetch(searchUrl);
          const text = await response.text();
          console.log(text);

          // Extract the IMDb ID from the first search result
          const imdbIdMatch = text.match(/\/title\/(tt\d+)/);
          if (!imdbIdMatch) {
            alert("Media not found!");
            return;
          }
          const imdbId = imdbIdMatch[1];

          let embedUrl = "";

          // Construct the embed URL based on media type
          if (mediaType === "movie") {
            embedUrl = `https://vidsrc.xyz/embed/movie/${imdbId}`;
          } else if (mediaType === "tv") {
            embedUrl = `https://vidsrc.xyz/embed/tv/${imdbId}`;
          } else if (mediaType === "episode") {
            if (!seasonNumber || !episodeNumber) {
              alert("Please enter both season and episode numbers!");
              return;
            }
            embedUrl = `https://vidsrc.xyz/embed/tv/${imdbId}/${seasonNumber}-${episodeNumber}`;
          }

          // Create and embed the iframe
          document.getElementById("iframeContainer").innerHTML = `
            <iframe src="${embedUrl}" allowfullscreen></iframe>
          `;
        } catch (error) {
          console.error("Error fetching media data:", error);
          alert("Failed to retrieve media information.");
        }
      }
    </script>
  </body>
</html>
